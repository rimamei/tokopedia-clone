(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[383],{1406:function(e,t){e.exports="https://assets.tokopedia.net/assets-tokopedia-lite/v2/zeus/kratos/d67f4bce.svg"},1979:function(e,t,n){"use strict";var r=n(4),o=Object(r.a)({resolved:{},chunkName:function(){return"merchant-voucher"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e(288).then(n.bind(null,1565))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 1565}},{ssr:!0});t.a=o},2778:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(50),i=n(763),u=n(1266),c=n(1979),l=n(617),d=n(1406),s=n.n(d),p=n(2),m=n(5),v=n(569),f=n.n(v),h=n(729),x=Object(p.css)("display:inline-block;"),b=Object(p.css)("color:",f()(m.x,.96),";font-size:16px;line-height:18px;font-weight:bold;margin:0 0 12px;",h.f),g=Object(p.default)("div",{target:"e1xgqt6y0"})((function(e){var t=e.open;return{position:"absolute",minHeight:"116px",width:"100%",border:"1px solid ".concat(t?m.z:"transparent"),borderBottom:"none",borderRadius:"8px 8px 0 0",boxShadow:t?"0 -3px 6px -3px rgba(49, 53, 59, 0.12)":"none",backgroundColor:t?m.l:"transparent"}})),y=Object(p.default)("div",{target:"e1xgqt6y2"})("position:absolute;width:calc(100% + 32px);height:",(function(e){return e.expanded?"auto":"117px"}),";min-height:117px;padding:16px;padding-bottom:",(function(e){return e.expanded?4:16}),"px;top:-16px;left:-16px;right:-16px;border:1px solid;border-color:",(function(e){return e.expanded?m.z:"transparent"}),";border-radius:8px;box-shadow:",(function(e){return e.expanded?"0 3px 6px -3px rgba(49, 53, 59, 0.12)":"none"}),";background-color:",m.l,";z-index:",(function(e){return e.expanded?10:"auto"}),";transform-origin:top;> div:first-of-type{height:",(function(e){return e.expanded?"auto":0}),";@media only screen and (max-width:1280px){display:flex;flex-wrap:",(function(e){return e.expanded?"wrap":"nowrap"}),";justify-content:space-between;}}"),w=function(e){return Object(p.css)("position:relative;display:inline-block;vertical-align:top;> div{width:180px;margin-right:12px;margin-left:0;margin-bottom:12px;margin-top:0;@media only screen and (max-width:1280px){width:170px;margin-right:",e?0:"16px",";}}")},O=Object(p.default)("div",{target:"e1xgqt6y3"})((function(e){return{display:"flex",flexWrap:"wrap",transform:e.open?"scaleY(1)":"scaleY(0)",transformOrigin:"top",transition:"transform .2s ease"}})),j=n(1731);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=e.layoutTracker,n=e.componentName,d=k(Object(r.useState)(!1),2),m=d[0],v=d[1],f=k(Object(r.useState)(0),2),h=f[0],E=f[1],_=Object(r.useContext)(u.a).removeFromLayout,A=Object(r.useContext)(i.a),C=A.merchantVouchers,S=A.productShopInfo,D=A.isP2Loading;Object(r.useEffect)((function(){D||C.length||_(n)}),[n,D,C.length,_]);var L,I,V=Object(r.useMemo)((function(){if(!C.length)return[];var e=Array.from(C);return e.sort((function(e,t){return e.status.id<t.status.id?-1:e.status.id>t.status.id?1:0})),e}),[C]),N=Object(r.useRef)(),P=Object(r.useCallback)((function(e){var t;if("function"==typeof(null==N||null===(t=N.current)||void 0===t?void 0:t.contains)){var n;if(null!=N&&null!==(n=N.current)&&void 0!==n&&n.contains(e.target))return;v(!1)}}),[N]),T=function(e,n){var r=n.voucherCode;E(e),Object(l.a)({layoutTracker:t,extraFields:{eventCategory:"pdp promo widget - promo",eventAction:"User click on copy code",eventLabel:r,promoId:e}})},z=function(e,n){var r=n.voucherCode;Object(l.a)({layoutTracker:t,extraFields:{eventCategory:"pdp promo widget - promo",eventAction:"User click on promo short desc",eventLabel:r,promoId:e}})};return Object(r.useEffect)((function(){return document.addEventListener("mousedown",P),function(){return document.removeEventListener("mousedown",P)}}),[P]),D?o.a.createElement(j.a,null):C.length<1?null:o.a.createElement("div",{className:(I=C.length,Object(p.css)("position:relative;height:116px;@media only screen and (max-width:1280px){height:",I>1?"140px":"116px",";}"))},o.a.createElement("div",{ref:N},o.a.createElement(g,{open:!1},o.a.createElement(y,{expanded:m},o.a.createElement("h6",{className:b,"data-testid":"lblPDPVoucher"},"Promo"),o.a.createElement("div",null,V.slice(0,2).map((function(e,t){var n,r,a,i,u;return o.a.createElement("div",{key:"voucher-".concat(t),className:w(m),"data-testid":"PDPDetailVoucher[".concat(t,"]")},o.a.createElement(c.a,{amount:null==e||null===(n=e.amount)||void 0===n?void 0:n.amount,amountType:null==e||null===(r=e.amount)||void 0===r?void 0:r.amount_type,isOwner:S.isAllowManage,minimumSpend:e.minimum_spend,statusId:null==e||null===(a=e.status)||void 0===a?void 0:a.status,voucherCode:e.voucher_code,voucherId:e.voucher_id,copiedVoucherId:h,voucherType:(null==e||null===(i=e.voucher_type)||void 0===i?void 0:i.identifier)||"free-ongkir",onApplyVoucher:T,banner:null==e||null===(u=e.banner)||void 0===u?void 0:u.desktop_url,tnc:null==e?void 0:e.tnc,onClickVoucher:z}))})),V.length>2&&o.a.createElement(O,{open:m},V.slice(2).map((function(e,t){var n,r,a,i,u;return o.a.createElement("div",{key:"voucher-".concat(t+2),className:w(m),"data-testid":"PDPDetailVoucher[".concat(t+2,"]"),"aria-hidden":!m},o.a.createElement(c.a,{amount:null==e||null===(n=e.amount)||void 0===n?void 0:n.amount,amountType:null==e||null===(r=e.amount)||void 0===r?void 0:r.amount_type,isOwner:S.isAllowManage,minimumSpend:e.minimum_spend,statusId:null==e||null===(a=e.status)||void 0===a?void 0:a.status,voucherCode:e.voucher_code,voucherId:e.voucher_id,copiedVoucherId:h,voucherType:(null==e||null===(i=e.voucher_type)||void 0===i?void 0:i.identifier)||"free-ongkir",onApplyVoucher:T,banner:null==e||null===(u=e.banner)||void 0===u?void 0:u.desktop_url,tnc:null==e?void 0:e.tnc,onClickVoucher:z}))})))),V.length>2&&o.a.createElement("div",{className:(L=m,Object(p.css)("position:absolute;top:62px;right:20px;cursor:pointer;font-size:12px;> p{display:block;}> img{object-fit:contain;margin:auto;display:block;width:18px;height:18px;transform:",L?"rotate(-180deg)":"rotate(0)",";transition:transform 0.2s ease;}@media only screen and (max-width:1280px){display:flex;top:130px;right:auto;left:20px;z-index:",L?"-1":"auto",";}")),onClick:function(){return v(!m)},"data-testid":"btnPDPDetailVoucherShowAll",role:"presentation"},o.a.createElement(a.a,{body:3,bold:!0,main:!0,margin:"0",className:x},"+ ",V.length-2," Lainnya"),o.a.createElement("img",{src:s.a,alt:"",role:"presentation"}))))))};t.default=Object(r.memo)(_)}}]);