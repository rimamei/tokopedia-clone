(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[381],{2639:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(660),o=n(682),c=n(17),l=n(617);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(173),m=n(1385),v=n.n(m),b=n(581),f=n(2),h=n(5),O=n(569),g=n.n(O),y=n(729),j=Object(f.css)("margin-bottom:4px;"),x=Object(f.css)("position:absolute;max-width:45px;top:-6px;margin:auto;left:0;right:0;background-color:",h.F,";padding:2px 4px;border-radius:6px;font-weight:bold;font-size:8px;color:white;border:2px solid white;justify-content:center;display:flex;height:16px;align-items:center;"),D=Object(f.css)(x,";position:relative;padding:2px 4px 0;top:auto;"),w=function(t){return Object(f.css)(y.c," border-radius:4px;width:44px;height:44px;position:relative;cursor:pointer;img{width:44px;height:44px;object-fit:contain;border-radius:4px;border:2px solid ",t?"#4FD15A":"transparent",";}")},I=Object(f.css)("color:white;position:absolute;height:100%;top:0;right:0;left:0;border-radius:4px;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:12px;line-height:18px;background:linear-gradient(0deg,",g()(h.x,.68),",",g()(h.x,.68),");"),N=function(t){var e,n=t.currentLevel,i=t.withThumbnail,c=t.variantName,l=Object(r.useContext)(o.a),u=l.variantData,p=l.variantCombination,d=l.addVariantCombination,m=l.enabledVariantChildren,h=l.setVariantDisplayImage,O=u[n].option,g=Object(r.useCallback)((function(t){return m.filter((function(e){return e.optionID[n]===Number(t)}))}),[n,m]),y=Object(r.useCallback)((function(t){var e;if(!m.length)return!1;var r=n-1,a=g(t);return r<0?a.some((function(t){var e;return null===(e=t.stock)||void 0===e?void 0:e.isBuyable})):!p[r]||(null===(e=(a.find((function(t){return t.optionID[r]===Number(p[r])}))||{}).stock)||void 0===e?void 0:e.isBuyable)}),[n,m,g,p]),N=Object(r.useMemo)((function(){return m.some((function(t){var e;return null===(e=t.campaignInfo)||void 0===e?void 0:e.isActive}))}),[m]),E=Object(r.useCallback)((function(t){var e;if(!m.length)return!1;var r=n-1,a=g(t);return r<0?a.some((function(t){var e;return null===(e=t.campaignInfo)||void 0===e?void 0:e.isActive})):null===(e=(a.find((function(t){return t.optionID[r]===p[r]}))||{}).campaignInfo)||void 0===e?void 0:e.isActive}),[n,m.length,g,p]),C=Object(r.useCallback)((function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null===(e=g(t))||void 0===e?void 0:e[0];a&&p[n]!==t&&d({level:n,id:t}),r.urlOriginal&&r.urlThumbnail?h(r):h({urlOriginal:"",urlThumbnail:""})}),[d,n,g,h,p]),V=Object(r.useCallback)((function(t){var e=t.option;C(Number(e.productVariantOptionID),e.picture)}),[C]);if(i)return a.a.createElement("div",{className:(e=N,Object(f.css)("display:flex;flex-wrap:wrap;margin-top:",e?8:0,"px;margin-bottom:-",e?13:5,"px;> button{margin-left:5px;margin-bottom:",e?13:5,"px;&:first-of-type{margin-left:0;}&:nth-child(5n + 1){margin-left:0;}}"))},O.map((function(t,e){var r,i=E(t.productVariantOptionID),o=!y(t.productVariantOptionID),c=p.includes(Number(t.productVariantOptionID))&&!o;return a.a.createElement("button",{type:"button",key:e,onClick:function(){o||C(Number(t.productVariantOptionID),t.picture)},className:w(c),disabled:o},a.a.createElement("div",null,a.a.createElement(b.a,{"data-testid":"pdpVariantItemLevel#".concat(n+1,"Number#").concat(e+1),alt:t.value,src:(null===(r=t.picture)||void 0===r?void 0:r.urlThumbnail)||""}),o&&a.a.createElement("div",{className:I},"Habis")),i&&!o&&a.a.createElement("div",{className:x},"PROMO"))})));var A=O.find((function(t){return Number(t.productVariantOptionID)===p[n]}))||{},k={placeholder:v()("Pilih ".concat(c)),visibleItems:4,value:A.value,onChange:V,items:O.map((function(t,e){var r=E(t.productVariantOptionID),i=!y(t.productVariantOptionID);return{value:t.value,option:t,appendObject:r&&!i?a.a.createElement("div",{className:D},"PROMO"):void 0,props:{"data-testid":"pdpVariantItemLevel#".concat(n+1,"Number#").concat(e+1),disabled:i,className:j}}}))};return a.a.createElement("div",{"data-testid":"btnProductVariantLevel".concat(n+1)},a.a.createElement(s.default,k))},E=Object(r.memo)(N),C=Object(f.css)("width:100%;"),V=Object(f.css)("> div{margin-bottom:16px;&:last-of-type{margin-bottom:12px;}}"),A=Object(f.css)("color:",h.H,";font-size:12px;line-height:18px;margin:-4px 0 0;padding-bottom:12px;"),k=Object(f.css)("margin-bottom:4px;color:",g()(h.x,.68),";line-height:20px;> span{text-transform:capitalize;color:",g()(h.x,.96),";}");function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(l){c=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=function(t){var e=t.layoutTracker,n=Object(r.useContext)(o.a),u=n.variantCombination,d=n.enabledVariantChildren,s=n.variantData,m=n.selectedChildren,v=n.selectedVariantName,b=n.setVariantDisplayImage,f=P(Object(r.useContext)(i.a),2),h=f[0].showVariantTicker,O=f[1];Object(r.useEffect)((function(){if(d.length&&m.productURL&&v.length){O({type:"SET_SHOW_VARIANT_TICKER",payload:0});var t=v.reduce((function(t,e){return"".concat(t).concat(t?" & ".concat(e):e)}),""),n=s.map((function(t){return t.name})).join(" & ");!function(t){var e=t.level,n=t.layoutTracker,r=t.variantType,a=t.variantName,i=t.variantProductId,o="click - choose product variant";c.default.pushObject(p({event:"clickPDP",eventCategory:"product detail page",eventAction:o,eventLabel:"level: ".concat(e),variant:i,variant_title:r,variant_value:a},Object(l.c)(p(p({},n),{},{eventAction:o}))))}({level:u.length,layoutTracker:e,variantType:n,variantName:t,variantProductId:m.productID}),b(m.picture)}}),[d.length,e,O,m.picture,m.productID,m.productURL,v,b,u,s]);var g=Object(r.useMemo)((function(){return s.map((function(t){return t.name})).join(" & ")}),[s]),y=Object(r.useMemo)((function(){return s.map((function(t,e){var n,r,i=(t.option||[]).find((function(t){return Number(t.productVariantOptionID)===u[e]})),o=null===(n=t.option)||void 0===n?void 0:n.every((function(t){var e;return Boolean(null===(e=t.picture)||void 0===e?void 0:e.urlThumbnail)}));return a.a.createElement("div",{key:e,className:C},a.a.createElement("div",{className:k,"data-testid":"pdpVariantTitle#".concat(e)},a.a.createElement("span",null,t.name,":")," ",(null==i?void 0:i.value)||"".concat((null===(r=t.option)||void 0===r?void 0:r.length)||0," varian")),a.a.createElement(E,{variantName:t.name,currentLevel:e,withThumbnail:o}))}))}),[u,s]);return a.a.createElement("div",{id:"pdpVariantContainer","data-testid":"pdpVariantContainer",className:V},y,h>0&&a.a.createElement("p",{className:A},"Pilih ",g," dulu, ya"))};e.default=Object(r.memo)(_)}}]);