(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[236],{2256:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GamifloatingQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"gamiFloating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"sum"},name:{kind:"Name",value:"sumToken"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sumTokenStr"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"timeRemaining"},name:{kind:"Name",value:"timeRemainingSeconds"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isShowTime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timerFontColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timerBGColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unixTimestamp"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"imgUrl"},name:{kind:"Name",value:"imgURL"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:181}};n.loc.source={body:"query GamifloatingQuery{gamiFloating{id name sum:sumToken sumTokenStr cta{url}timeRemaining:timeRemainingSeconds isShowTime timerFontColor timerBGColor unixTimestamp imgUrl:imgURL}}",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.GamifloatingQuery=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var u=c;c=new Set,u.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){c.add(e)})))}))}return o.forEach((function(t){var r=a(e,t);r&&n.definitions.push(r)})),n}(n,"GamifloatingQuery")},2582:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(2),o=n(1061),c=n(1062),u=n(727),l=n(2256);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=function(e){var t,n=e.data,r=e.loading,i={};if(!e.error&&n&&n.gamiFloating){var a=n.gamiFloating,o=a.id,c=a.imgUrl,u=a.timeRemaining,l=a.cta,s=d(a,["id","imgUrl","timeRemaining","cta"]);o&&0!==o?(t=m(m({},s),{},{id:o,url:l.url||"",timestamp:u?parseInt((new Date).getTime()/1e3,10)+u:void 0,imgUrl:c&&c.length>0?c:void 0}),i.status="success"):i.status="no_result"}else i.status=r?"loading":"error";return{meta:i,data:t}},v=n(38),p=n(922),g=function(e){var t=e.id,n=e.url,r=e.imgUrl,i=e.sum,a=e.isShowTime,o=e.timestamp;return{id:t,name:e.name,url:n,imgUrl:r,sum:i,isShowTime:a,timestamp:o}},y=n(562),h=Object(a.css)("position:fixed;display:block;width:100px;bottom:90px;right:5%;text-align:center;z-index:50;"),O=Object(a.css)("position:relative;display:block;width:100%;"),k=Object(a.css)("position:absolute;top:30%;right:2%;height:30px;width:30px;background:",y.L,";color:white;border-radius:50%;font-weight:900;line-height:30px;"),j=Object(a.css)("position:relative;top:-10px;display:inline-block;padding:2px 15px;background-color:",y.J,";color:",y.Y,";font-size:12px;font-weight:900;border-radius:10px;letter-spacing:0.2px;");function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C=function(e){var t=S(Object(r.useState)(void 0),2),n=t[0],a=t[1],o=S(Object(r.useState)(void 0),2),c=o[0],u=o[1],l=S(Object(r.useState)(!0),2),s=l[0],m=l[1],f=Object(r.useRef)(!1),d=Object(r.useRef)(!1),b=e.url,v=e.imgUrl,y=e.sum,w=e.isShowTime,C=e.timestamp,x=e.timerFontColor,E=e.timerBGColor,A=e.onTimeout,N=e.onClick,T=e.onVisible,D=Object(r.useCallback)((function(){f.current&&clearInterval(f.current),d.current&&clearTimeout(d.current)}),[f]),F=Object(r.useCallback)((function(){D(),A&&A()}),[D,A]),P=Object(r.useCallback)((function(e){var t=new Date;if(e&&e>t){var n=Object(p.c)(e,t);a(Object(p.a)(n))}else a("00:00:00"),F()}),[F]),U=Object(r.useCallback)((function(){if(D(),w&&C){var e=Object(p.b)(C);f.current=setInterval((function(){P(e)}),1e3)}else if(C){var t=new Date(C)-new Date;d.current=setTimeout((function(){F()}),Math.min(t,2147483647))}}),[D,F,w,C,P]),I=Object(r.useCallback)((function(){T&&s&&(T(g(e)),m(!1))}),[s,T,e]),_=function(){N&&N(g(e))};return Object(r.useEffect)((function(){c!==C&&(U(),u(C))}),[c,U,C]),Object(r.useEffect)((function(){I()}),[I]),i.a.createElement("a",{href:b,className:h,onClick:function(){return _()}},i.a.createElement("img",{src:v,alt:"Gamifloating",className:O}),y>0&&i.a.createElement("span",{className:k},y),w&&C&&i.a.createElement("div",{className:j,style:{color:x,backgroundColor:E}},n||"loading..."))};C.defaultProps={isShowTime:"",sum:0,timerBGColor:"",timerFontColor:"",timestamp:0,url:"",onClick:v.a,onTimeout:v.a,onVisible:v.a};var x=Object(r.memo)(C),E=n(17),A=function(e){var t=e.id,n=e.name,r={event:"clickHomepage",eventCategory:"lucky egg - homepage entry point",eventAction:"click egg on homepage",eventLabel:"".concat(t,"_").concat(n)};return E.default.pushObject(r),!0},N=function(e){var t=e.id,n=e.name,r={event:"viewHomepage",eventCategory:"lucky egg - homepage entry point",eventAction:"impression on egg",eventLabel:"".concat(t,"_").concat(n)};return E.default.pushObject(r),!0},T=Object(a.css)("opacity:0;visibility:hidden;transition:opacity 0.5s,visibility 0s 0.5s;"),D=Object(a.css)("opacity:1;visibility:visible;transition:opacity 0.5s,visibility 0s;");function F(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(r.useContext)(o.a).enqueueTask,t=Object(c.a)().idleQueueDelay,n=P(Object(r.useState)(0),2),s=n[0],m=n[1],f=Object(u.a)(l,{fetchPolicy:"cache-and-network",ssr:!1}),d=f.refetch,v=F(f,["refetch"]),p=b(v),g=p.meta,y=p.data,h=Object(r.useCallback)((function(){s<2&&(d(),m(s+1))}),[s,d]),O=Object(r.useCallback)((function(n){e({task:function(){return N(n)},delay:t})}),[e,t]),k=Object(r.useCallback)((function(e){A(e)}),[]),j="success"===(null==g?void 0:g.status);return i.a.createElement("div",{className:Object(a.cx)(T,j?D:"")},j&&y&&(null==y?void 0:y.imgUrl)&&i.a.createElement(x,Object.assign({},y,{onVisible:O,onClick:k,onTimeout:function(){return h()}})))}},922:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));n(695);var r=n(606);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){c=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return Object(r.b)(e)?new Date(1e3*e):""},c=function(e,t){var n=Math.abs(t-e)/1e3,r=Math.floor(n/86400);n-=86400*r;var i=Math.floor(n/3600)%24;n-=3600*i;var a=Math.floor(n/60)%60;return n-=60*a,{day:r,hour:i,minute:a,second:parseInt(n%60,10)}},u=function(e){return[["day",void 0],["hour","00"],["minute","00"],["second","00"]].reduce((function(t,n){var a=i(n,2),o=a[0],c=a[1];return!Object(r.c)(e[o])||e[o]<=0?c&&t.push(c):e[o]<10?t.push("0".concat(e[o])):t.push(e[o]),t}),[]).join(":")}}}]);