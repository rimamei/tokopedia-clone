var browser=function(){"use strict";var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,a,c,u){return new(c=c||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof c?t:new c(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function p(n,r){var o,i,a,e,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){c.label=t[1];break}if(6===t[0]&&c.label<a[1]){c.label=a[1],a=t;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(t);break}a[2]&&c.ops.pop(),c.trys.pop();continue}t=r.call(n,c)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function n(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}function h(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&Math.floor(t.bottom)<=(window.innerHeight||document.documentElement.clientHeight)&&Math.floor(t.right)<=(window.innerWidth||document.documentElement.clientWidth)}function e(n,r){var o;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(o),o=setTimeout(function(){n.apply(void 0,v(e))},r)}}function t(){return f(void 0,void 0,void 0,function(){var u,s,d;return p(this,function(e){switch(e.label){case 0:return b?[2]:(b=!0,[4,void(0<(c=document.querySelectorAll('[data-id*="tdn-"]:not([data-triggered="true"])')).length&&E.call(c,function(e){if(h(e)){var o=Object.assign({},e.dataset),t=Object.keys(o).reduce(function(e,t){var n,r=t.replace(/([-_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("_","")});return Object.assign(e,((n={})[r]=o[t],n))},{element:e});e.setAttribute("data-triggered","true"),w.push(t)}}))]);case 1:return(e.sent(),0===(u=w.filter(function(e){return!e.isFetched})).length)?(b=!1,[2]):(t=u,n=v(new Set(t.map(function(e){return e.dimenId}))).join(","),i=v(new Set(t.map(function(e){return e.depId}))).join(","),a=v(new Set(t.map(function(e){return e.productId}))).join(","),s=l(l(l(l({dimen_id:n,ep:"banner",device:t[0].device||"desktop",inventory_id:t[0].inventoryId||"0",user_id:t[0].userId||"0",item:t.length},m.token&&t[0].inventoryId===m.invID?{page_token:m.token}:{}),i?{dep_id:i}:{}),a?{product_id:a}:{}),t[0].q?{q:t[0].q}:{}),[4,(r=s,o=u,new Promise(function(t){var n=new XMLHttpRequest,e="https://ta.tokopedia.com/v1.3/display?"+Object.entries(r).map(function(e){return e.map(encodeURIComponent).join("=")}).join("&");n.withCredentials=!0,n.timeout=2e3,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.OPENED&&window.dispatchEvent(new CustomEvent("onStartRequestTDN",{detail:{code:"100",desc:"Request banner ads started",error:!1,bannerData:o,response:null}})),n.readyState===XMLHttpRequest.LOADING&&window.dispatchEvent(new CustomEvent("onProcessRequestTDN",{detail:{code:"101",desc:"Request banner ads in the process",error:!1,bannerData:o,response:null}})),n.readyState===XMLHttpRequest.DONE)if(200===n.status){var e=JSON.parse(n.responseText);t(e),window.dispatchEvent(new CustomEvent("onSuccessRequestTDN",{detail:{code:"200",desc:"Request banner ads was successful",error:!1,bannerData:o,response:e}}))}else t({errors:!0}),window.dispatchEvent(new CustomEvent("onErrorRequestTDN",{detail:{code:"500",desc:"Request banner ads was failed",error:!0,bannerData:o,response:null}}))},n.onerror=function(){t({errors:!0}),window.dispatchEvent(new CustomEvent("onErrorRequestTDN",{detail:{code:"400",desc:"Request banner ads was failed",error:!0,bannerData:o,response:null}}))},n.ontimeout=function(){t({errors:!0}),window.dispatchEvent(new CustomEvent("onTimeoutRequestTDN",{detail:{code:"408",desc:"Request banner ads was timeout",error:!0,bannerData:o,response:null}}))},n.open("GET",e,!0),n.send()}))]);case 2:return(d=e.sent()).errors?[4,u.forEach(function(e){e.isFetched=!0})]:[3,4];case 3:return e.sent(),b=!1,[2];case 4:return m={invID:u[0].inventoryId||"",token:d.header&&d.header.pagination&&d.header.pagination.next_page_token||""},u.forEach(function(a,c){return f(void 0,void 0,void 0,function(){var t,n,r,o,i;return p(this,function(e){return n=document.createElement("img"),r=document.createElement("a"),o=d.data[c]&&d.data[c].ad_click_url||"",i=d.data[c]&&d.data[c].ad_view_url||"",0<d.data.length&&d.data.forEach(function(e){t=e.banner.images.filter(function(e){return String(e.image_dimension.dimen_id)===a.dimenId}).map(function(e){return e.full_ecs})}),r.href=o||"",n.src=t||"",n.onload=function(){a.element.setAttribute("data-fetched","true")},a.isFetched=!0,a.trackingClick=o,a.trackingView=i,a.responseData=d,a.element.appendChild(r),r.appendChild(n),a.element.addEventListener("click",function(){window.dispatchEvent(new CustomEvent("clickTDN",{detail:d.data[c]}))},!1),a.element.addEventListener("click",function(){window.dispatchEvent(new CustomEvent("clickDataTDN",{detail:u}))},!1),c+1===u.length&&(b=!1),[2]})})}),g(),[2]}var r,o,t,n,i,a,c})})}function r(){window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("scroll",g,{passive:!0}),i.observe(document,{childList:!0,subtree:!0})}var w=[],m={invID:"",token:""},b=!1,E=Array.prototype.forEach,g=e(function(){var n;0!==(n=w.filter(function(e){return e.trackingView&&!e.isViewed})).length&&n.forEach(function(e){if(h(e.element)){var t=new XMLHttpRequest;t.open("GET",e.trackingView+"&render=false"),t.withCredentials=!0,t.timeout=2e3,t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&(e.isViewed=!0,e.element.setAttribute("data-tdn_impressed","true"))},t.send(),window.dispatchEvent(new CustomEvent("impressionTDN",{detail:n}))}})},75),o=e(function(){return t()},50),i=new MutationObserver(function(e){e.length&&E.call(e,function(e){e.addedNodes.length&&E.call(e.addedNodes,function(e){var t,n,r;1===e.nodeType&&(t=e,n='[data-id*=tdn-]:not([data-triggered="true"])',r=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector,t instanceof HTMLElement&&r.call(t,n))&&o()})})}),a={init:function(){return f(void 0,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return e.sent(),r(),[2]}})})},createAds:function(){return o()},startListener:function(){return r()},stopListener:function(){return window.removeEventListener("scroll",o,!1),void i.disconnect()},resetPageToken:function(){m={invID:"",token:""}}};return(window.__LITE_TDN__=a).init(),a}();
